# Lifting State Up

### ğŸ’¡ Maitriser le Lifting State Up

## ğŸ“ Tes notes

Detaille ce que tu as appris ici `src/exercise/06.md`ouÂ surÂ uneÂ pageÂ [Notion](https://go.mikecodeur.com/course-notes-template)

## Comprendre

Une question qui revient souvent : *Comment partager un state entre plusieurs composants proches ?* En effet plusieurs composants peuvent avoir besoins des mÃªmes donnÃ©es. Ces donnÃ©es peuvent avoir besoin d'Ãªtre mises Ã  jour puis repartagÃ©es. Il faut absolument Ã©viter la duplication de la mÃªme donnÃ©e. Il doit y avoir une seule *source de vÃ©ritÃ©.* Imaginons le composant contrÃ´lÃ© `<NameInput />` qui gÃ¨re le state nom en interne.

```jsx
function NameInput() {
  const [name, setName] = React.useState('')
  const handleChange = e => {
    setName(e.target.value)
  }
  return (
   <input type="text" value={name} onChange={handleChange} />
  )
}
```

Imaginons un prop `onNameChange` qui soit une fonction qui logue le `name` a chaque changement.

```jsx
const handleNameChange = (name) => {
 console.log(name)
}
<NameInput onNameChange={handleNameChange} />
```

On pourrait Ã©crire `props.onNameChange(e.target.value)` pour faire remonter (Lifting State Up) le state au parent.

```jsx
function NameInput(props) {
  const [name, setName] = React.useState('')
  const handleChange = e => {
    setName(e.target.value)
    props.onNameChange(e.target.value)
  }
  return (
   <input type="text" value={name} onChange={handleChange} />
  )
}
```

Comme le `state` est maintenant remontÃ© au composant parent on pourrait le faire redescendre via les `props` et supprimer le state `name`.

```jsx
function NameInput({onNameChange, name}) {
  const handleChange = e => {
    onNameChange(e.target.value)
  }
  return (
   <input type="text" value={name} onChange={handleChange} />
  )
}

function App() {
	const [name, setName] = React.useState('')
  const handleNameChange = name => {
    setName(name)
  }
  return (
     <NameInput onNameChange={handleNameChange} name={name} />
  )
}
```

Le circuit de remontÃ© des states et redescente via les `props` pourrait ressembler Ã  cela : 

```markdown
![State Lift up](/lift-up-gif.gif)
```

## Exercice

Utiliser ce pattern

## Aller plus loin

ğŸ“‘ Le lien vers la doc [https://www.w3schools.com/html/html_css.asp](https://www.w3schools.com/html/html_css.asp)

## ğŸœ Feedback

Remplir le formulaire le [formulaire de FeedBack](https://go.mikecodeur.com/cours-react-avis).